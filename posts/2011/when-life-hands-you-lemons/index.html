<!doctype html>
<!--[if lte IE 7]>
  <meta http-equiv="refresh" content="0" url="http://browsehappy.com/" />
  <script type="text/javascript">
  /* <![CDATA[ */
  window.top.location = 'http://browsehappy.com/';
  /* ]]> */
  </script>
<![endif]-->
<!--[if IE 8]><html class="ie8"> <![endif]-->
<!--[if gt IE 8]><!--><html class="gt-ie8"><!--<![endif]-->
  
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta http-equiv="cleartype" content="on">
    <meta name="author" content="">
    <meta name="description" content="Syntaxfx">

    <title>When life hands you lemons... | Syntax FX</title>
    <link href="../../../stylesheets/screen.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
<script src="../../../javascripts/core.js" type="text/javascript"></script>
    <script type="text/javascript">
      WebFontConfig = {
         google: { families: [ 'IM+Fell+DW+Pica+SC::latin', 'Averia+Gruesa+Libre::latin', 'Asap::latin', 'Noto+Sans::latin' ] }
      };
      (function() {
        var wf = document.createElement('script');
        wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
          '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
        wf.type = 'text/javascript';
        wf.async = 'true';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(wf, s);
      })(); 
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="../../../images/favicon.png" rel="icon" type="image/png" />
    <link href="../../../images/favicon.ico" rel="icon" type="image/ico" />
<-- MathJax Library -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"> </script>
  </head>
  
  <body lang="en">
    <div id="container">
      <header>
        <h1>
<svg xmlns:xlink="http://www.w3.org/1999/xlink 
  width="850" height="200" viewBox="0 0 850 200" 
  preserveAspectRatio="slice">

  <a xlink:href="/" xlink:show="replace">
  <style type="text/css">
     rect:hover {fill:green}
     circle:hover {fill:green}
     text:hover {fill:green}
  </style>
     <rect width="850" height="200" 
        fill="#D6302B" fill-opacity="1.0" 
        stroke="black" stroke-width="1" />
     <circle cx="550" cy="100" r="140" 
        fill="#E85832" fill-opacity="1.0" 
        stroke="black" stroke-width="10" />
     <circle cx="550" cy="100" r="100" 
        fill="#FF7A26" fill-opacity="1.0" 
        stroke="black" stroke-width="3" />
     <circle cx="550" cy="100" r="60" 
        fill="#E8AE63" fill-opacity="1.0" 
        stroke="black" stroke-width="5" />
     <circle cx="550" cy="100" r="30" 
        fill="green" fill-opacity="1.0" 
        stroke="black" stroke-width="10" />
     <text x="0" y="195" font-size="180" text-anchor="left" 
        fill="#FFC33B" stroke="black" 
        stroke-width="3">Syntax FX</text>
  </a>
</svg>
</h1>
  <div id="intro">
     <p class="subTitle details">Tech Blog by Allan Bowhill.</p>
  </div>

        <nav class="clearfix">
          <div class="navButton button previousButton">
            <a class="previous details" href="/posts/2011/short-rvm-setup-sheet/"><i class="icon-backward left-more"></i>Earlier</a>
          </div>
          
          
            <div class="navButton button nextButton">
              <a href="/posts/2011/a-neat-trick/" class="next details">Later<i class="icon-forward right-more"></i></a>
            </div>
          
         <span class="navLinks details"><a href="http://twitter.com"><i class="icon-twitter"></i>Twitter</a><a href="/rss.rss"><i class="icon-rss"></i>RSS</a><a class="last" href="mailto:blank@blank.com"><i class="icon-envelope-alt"></i>Contact</a></span>
        </nav>
      </header>
      <article class="single">
        <h2><a href="/posts/2011/when-life-hands-you-lemons/">When life hands you lemons...</a></h2>
        <span class="postDetails clearfix"><time class="date details">May  6 2011</time><span class="tagLinks details">Tags: 	
	  <span class="tags"><a class="tags" href="/posts/tags/ruby/">Ruby</a></span>
	</span></span>
        <p>If you’re unemployed and want to know how many days it’s been, how many years experience you have, and with which companies, this Ruby class will tell you. Basically, initialize the WorkHistoryAnalysis class, pass in each experience as “<name>, [start date], [end date]" in YYYY,MM,DD format as shown at the bottom of the file. A little report will be generated at the console.</name></p>

<pre class="highlight ruby"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div><div class="lineno">8</div><div class="lineno">9</div><div class="lineno">10</div><div class="lineno">11</div><div class="lineno">12</div><div class="lineno">13</div><div class="lineno">14</div><div class="lineno">15</div><div class="lineno">16</div><div class="lineno">17</div><div class="lineno">18</div><div class="lineno">19</div><div class="lineno">20</div><div class="lineno">21</div><div class="lineno">22</div><div class="lineno">23</div><div class="lineno">24</div><div class="lineno">25</div><div class="lineno">26</div><div class="lineno">27</div><div class="lineno">28</div><div class="lineno">29</div><div class="lineno">30</div><div class="lineno">31</div><div class="lineno">32</div><div class="lineno">33</div><div class="lineno">34</div><div class="lineno">35</div><div class="lineno">36</div><div class="lineno">37</div><div class="lineno">38</div><div class="lineno">39</div><div class="lineno">40</div><div class="lineno">41</div><div class="lineno">42</div><div class="lineno">43</div><div class="lineno">44</div><div class="lineno">45</div><div class="lineno">46</div><div class="lineno">47</div><div class="lineno">48</div><div class="lineno">49</div><div class="lineno">50</div><div class="lineno">51</div><div class="lineno">52</div><div class="lineno">53</div><div class="lineno">54</div><div class="lineno">55</div><div class="lineno">56</div><div class="lineno">57</div><div class="lineno">58</div><div class="lineno">59</div><div class="lineno">60</div><div class="lineno">61</div><div class="lineno">62</div><div class="lineno">63</div><div class="lineno">64</div><div class="lineno">65</div><div class="lineno">66</div><div class="lineno">67</div><div class="lineno">68</div><div class="lineno">69</div><div class="lineno">70</div><div class="lineno">71</div><div class="lineno">72</div><div class="lineno">73</div><div class="lineno">74</div><div class="lineno">75</div><div class="lineno">76</div><div class="lineno">77</div><div class="lineno">78</div><div class="lineno">79</div><div class="lineno">80</div></td><td class="code"><span class="nb">require</span> <span class="s1">&#39;date&#39;</span><span class="p">;</span>
 
<span class="k">class </span><span class="nc">WorkHistoryAnalysis</span>
   <span class="kp">attr_accessor</span> <span class="ss">:total</span><span class="p">,</span> <span class="ss">:company</span><span class="p">,</span> <span class="ss">:latest</span>
 
   <span class="k">def </span><span class="nf">initialize</span><span class="p">()</span>
      <span class="vi">@total_days</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="vi">@company</span> <span class="o">=</span> <span class="no">Hash</span><span class="nf">.new</span>
      <span class="vi">@latest</span> <span class="o">=</span> <span class="no">Date</span><span class="nf">.new</span>
   <span class="k">end</span>
 
   <span class="k">def </span><span class="nf">workedFor</span><span class="p">(</span><span class="n">who</span><span class="p">,</span> <span class="n">from</span><span class="p">,</span> <span class="n">to</span><span class="p">)</span>
      <span class="n">to_d</span> <span class="o">=</span> <span class="no">Date</span><span class="nf">.new</span><span class="p">(</span><span class="n">to</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span><span class="n">to</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span><span class="n">to</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
      <span class="n">from_d</span> <span class="o">=</span> <span class="no">Date</span><span class="nf">.new</span><span class="p">(</span><span class="n">from</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">,</span><span class="n">from</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">,</span><span class="n">from</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
 
      <span class="n">latest?</span><span class="p">(</span><span class="n">to_d</span><span class="p">)</span>
 
      <span class="n">days</span> <span class="o">=</span> <span class="p">(</span><span class="n">to_d</span> <span class="o">-</span> <span class="n">from_d</span><span class="p">)</span><span class="nf">.to_i</span>
 
      <span class="k">if</span> <span class="p">(</span><span class="vi">@company</span><span class="nf">.has_key?</span><span class="p">(</span><span class="n">who</span><span class="p">))</span>
         <span class="vi">@company</span><span class="o">[</span><span class="n">who</span><span class="o">]</span> <span class="o">+=</span> <span class="n">days</span>
      <span class="k">else</span>
         <span class="vi">@company</span><span class="o">[</span><span class="n">who</span><span class="o">]</span> <span class="o">=</span> <span class="n">days</span>
      <span class="k">end</span>
 
      <span class="vi">@total_days</span> <span class="o">+=</span> <span class="n">days</span>
   <span class="k">end</span>
 
   <span class="k">def </span><span class="nf">latest?</span><span class="p">(</span><span class="n">dat</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">((</span><span class="n">dat</span> <span class="o">&lt;=&gt;</span> <span class="vi">@latest</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
         <span class="vi">@latest</span> <span class="o">=</span> <span class="n">dat</span>
      <span class="k">else</span>
         <span class="k">return</span> <span class="kp">false</span>
      <span class="k">end</span>
      <span class="k">return</span> <span class="kp">true</span>
   <span class="k">end</span>
 
   <span class="k">def </span><span class="nf">employed</span>
      <span class="n">years</span> <span class="o">=</span> <span class="n">days2yrs</span><span class="p">(</span><span class="vi">@total_days</span><span class="p">)</span>
      <span class="k">return</span> <span class="o">[</span><span class="s2">&quot;Employed for:&quot;</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="s2">&quot;   </span><span class="si">#{</span><span class="n">years</span><span class="si">}</span><span class="s2"> years [</span><span class="si">#{</span><span class="vi">@total_days</span><span class="si">}</span><span class="s2"> total days]&quot;</span><span class="o">]</span>
   <span class="k">end</span>
 
   <span class="k">def </span><span class="nf">unemployed</span>
      <span class="n">days</span> <span class="o">=</span> <span class="p">(</span><span class="no">Date</span><span class="nf">.today</span> <span class="o">-</span> <span class="vi">@latest</span><span class="p">)</span><span class="nf">.to_i</span>
      <span class="n">years</span> <span class="o">=</span> <span class="n">days2yrs</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
      <span class="k">return</span> <span class="o">[</span><span class="s2">&quot;Currently unemployed for:&quot;</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="s2">&quot;   </span><span class="si">#{</span><span class="n">years</span><span class="si">}</span><span class="s2"> years [</span><span class="si">#{</span><span class="n">days</span><span class="si">}</span><span class="s2"> days]&quot;</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="s2">&quot;Last worked:&quot;</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="s2">&quot;   </span><span class="si">#{</span><span class="vi">@latest</span><span class="nf">.to_s</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">]</span>
   <span class="k">end</span>
 
   <span class="k">def </span><span class="nf">days2yrs</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
      <span class="n">years</span> <span class="o">=</span> <span class="n">days</span><span class="o">/</span><span class="mi">365</span><span class="nf">.to_f</span>
      <span class="k">return</span> <span class="p">(</span><span class="n">years</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="nf">.round.to_f</span> <span class="sr">/ 100
   end
 
   def list_experiences
      str = &quot;Employment breakdown by company:\n&quot;
      co = @company.sort_by { |k,v| v }
      co.each { |a| str += &quot;   </span><span class="si">#{</span><span class="n">a</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="si">}</span><span class="sr"> </span><span class="si">#{</span><span class="n">days2yrs</span><span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span><span class="si">}</span><span class="sr"> years [</span><span class="si">#{</span><span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="si">}</span><span class="sr"> days]\n&quot; }
      return str      
   end
 
   def print
      puts employed
      puts unemployed
      puts list_experiences
   end
end

# Part where you enter your own work history 
 
W = WorkHistoryAnalysis.new
W.workedFor(&quot;NWlink&quot;,[1996,2,1],[1997,7,1])
W.workedFor(&quot;Orrtax&quot;,[1997,8,1],[2000,1,1])
W.workedFor(&quot;Hostpro&quot;,[2000,2,1],[2001,11,1])
W.workedFor(&quot;College&quot;,[2002,4,1],[2005,12,16])
W.workedFor(&quot;Microsoft&quot;,[2006,1,1],[2006,5,1])
W.workedFor(&quot;Marchex&quot;,[2006,6,1],[2008,4,1])
W.workedFor(&quot;Microsoft&quot;,[2008,10,1],[2009,9,26])
W.workedFor(&quot;Microsoft&quot;,[2011,9,1],[2012,9,1])
W.print
</span></td></tr></tbody></table></pre><p />

<p>The report will look something like this:</p>

<pre class="highlight text"><table><tbody><tr><td class="gutter gl"><div class="lineno">1</div><div class="lineno">2</div><div class="lineno">3</div><div class="lineno">4</div><div class="lineno">5</div><div class="lineno">6</div><div class="lineno">7</div><div class="lineno">8</div><div class="lineno">9</div><div class="lineno">10</div><div class="lineno">11</div><div class="lineno">12</div><div class="lineno">13</div></td><td class="code">Employed for:
   13.45 years [4909 total days]
Currently unemployed for:
   1.19 years [435 days]
Last worked:
   2012-09-01
Employment breakdown by company:
   NWlink 1.41 years [516 days]
   Hostpro 1.75 years [639 days]
   Marchex 1.84 years [670 days]
   Microsoft 2.32 years [846 days]
   Orrtax 2.42 years [883 days]
   College 3.71 years [1355 days]
</td></tr></tbody></table></pre><p />


      </article>
      <footer class="footer clearfix">
	<div class="contact">
		<p class="details">Contact me, if that's what you want.</p>
	</div>
	<div class="links">
		<ul class="clearfix">
			<li class="details"><a href="/posts/2013.html">Archive</a></li>
			<li class="details"><a href="/rss.rss">RSS</a></li>
			<li class="details"><a href="mailto:allanbowhill@yahoo.com">Contact</a></li>
		</ul>
	</div>
</footer>

    </div>
  </body>
</html>
